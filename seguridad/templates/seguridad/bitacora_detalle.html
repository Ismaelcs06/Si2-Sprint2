{% extends 'base.html' %}
{% block title %}Detalle de Bitácora{% endblock %}
{% block content %}
<div class="container mt-4">
  <h3 class="mb-4">📄 Detalle del Registro de Bitácora</h3>

  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <h5 class="card-title">Información General</h5>
      <p><strong>Usuario:</strong> {{ bitacora.idUsuario.username }}</p>
      <p><strong>Acción:</strong> {{ bitacora.login }}</p>
      <p><strong>IP:</strong> {{ bitacora.ip|default:"—" }}</p>
      <p><strong>Fecha:</strong> {{ bitacora.fecha|date:"d/m/Y H:i" }}</p>
      <p><strong>Dispositivo:</strong> {{ bitacora.device|default:"—" }}</p>
      <p><strong>Navegador / UserAgent:</strong> {{ bitacora.userAgent|default:"—" }}</p>
    </div>
  </div>

  <h5 class="mb-3">📑 Acciones registradas</h5>
  <table class="table table-striped table-hover align-middle">
    <thead class="thead-light">
      <tr>
        <th>Fecha</th>
        <th>Tabla</th>
        <th>Acción</th>
        <th>Detalle</th>
      </tr>
    </thead>
    <tbody>
      {% for d in detalles %}
      <tr>
        <td>{{ d.fecha|date:"d/m/Y H:i" }}</td>
        <td>{{ d.tabla }}</td>
        <td>{{ d.accion }}</td>
        <td>{{ d.detalle|default:"—" }}</td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="4" class="text-center text-muted">No hay detalles asociados a este registro.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <div class="mt-4">
    <a href="{% url 'seguridad:bitacora_list' %}" class="btn btn-secondary">
      ← Volver a la Bitácora
    </a>
  </div>
</div>
{% endblock %}
